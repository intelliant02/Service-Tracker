<services>
    <service verb="create" noun="ReceptionEntity" authenticate="false">
        <in-parameters>
            <parameter name="CarNo"/>
            <parameter name="InTime"/>
            <parameter name="Job"/>
            <parameter name="ServiceAdviser"/>
            <parameter name="DriverOrOwner"/>
            <parameter name="Gift"/>
            <parameter name="DropCar"/>
            <parameter name="CustomerWaiting"/>
            <parameter name="CarStatus"/>
        </in-parameters>
        <actions>
            <service-call name="create#service.tracker.ReceptionEntity" out-map="context" in-map="context"/>
            <service-call name="create#service.tracker.StatusAndCarNo" in-map="[CarNo:CarNo, CarStatus:CarStatus]"/>
        </actions>
    </service>
    <service verb="create" noun="CarController" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
        <actions>
            <service-call name="create#service.tracker.CarController" in-map="context" out-map="context"/>
            <service-call name="create#service.tracker.StatusAndCarNo" in-map="[CarNo:CarNo, CarStatus:CarStatus]"/>
        </actions>
    </service>
    <!--<service verb="create" noun="StatusAndCarNo" authenticate="false">
        <in-parameters>
            <parameter name="CarNo"/>
           <parameter name="CarStatus"/>
        </in-parameters>
    </service> -->
    <service verb="delete" noun="ReceptionEntity" type="entity-auto" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
    </service>
    <service verb="get" noun="SecurityAndCarStatus" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
        <out-parameters>
            <parameter name="receptionCarList" type="List"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="SecurityAndCarStatus" list="receptionCarList">
                <econditions>
                    <econdition field-name="CarStatus" value="Reception"/>
                </econditions>
            </entity-find>
        </actions>
    </service>
    <service verb="create" noun="SecurityCheck" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
        <actions>
            <service-call name="create#service.tracker.SecurityCheck" in-map="[CarNo:CarNo, KmIn:KmIn]"/>
            <service-call name="create#service.tracker.StatusAndCarNo"
                          in-map="[CarNo:CarNo, CarStatus:'Reception', InTime:InTime]"/>
            <!--TODO: Find out a way to work InTime -->
        </actions>
    </service>
    <service verb="delete" noun="StatusAndCarNo" type="entity-auto" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
    </service>
    <service verb="get" noun="ReceptionEntityAndCarStatus" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
        <out-parameters>
            <parameter name="adviserCarList" type="List"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="ReceptionEntityAndCarStatus" list="adviserCarList">
                <econditions>
                    <econdition field-name="CarStatus" value="Service adviser"/>
                </econditions>
            </entity-find>
        </actions>
    </service>
    <service verb="get" noun="StatusAndCarNo" authenticate="false">
        <in-parameters>
            <auto-parameters include="all"/>
        </in-parameters>
        <out-parameters>
            <parameter name="receptionCarList" type="List"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="StatusAndCarNo" list="receptionCarList">
                <econditions>
                    <econdition field-name="CarStatus" value="Reception"/>
                </econditions>
            </entity-find>
        </actions>
    </service>
    <service verb="create" noun="AdviserEntry" authenticate="false">
        <in-parameters>
            <parameter name="CarNo"/>
            <parameter name="CustomerName"/>
            <parameter name="MobileName"/>
            <parameter name="promisedTime"/>
            <parameter name="DriverName"/>
            <parameter name="Job"/>
            <parameter name="BeforeRoadTest"/>
            <parameter name="AfterRoadTest"/>
            <parameter name="CarStatus"/>
        </in-parameters>
        <actions>
            <service-call name="create#service.tracker.AdviserEntry" out-map="context" in-map="context"/>
            <service-call name="update#service.tracker.StatusAndCarNo" in-map="[CarNo:CarNo, CarStatus:CarStatus, InTime:InTime]"> <!-- Need to change create from update -->
                <econditions combine="and">
                    <econdition>
                        <econdition field-name="CarNo" value="${CarNo}"/>
                        <econdition field-name="CarStatus" value="Reception"/>
                    </econdition>
                </econditions>
            </service-call>
        </actions>
    </service>
</services>